@use '../global.scss' as *;
@use '../animations.scss' as *;


$poke-bg:        #fdfdfd;
$poke-border:    #0f4755;
$poke-shadow:    rgba(0,0,0,0.4);
$poke-accent:    #ffcc00; 
$poke-accent-2:  #2a6db0; 

.modal-messages {
  position: fixed;
  left: 50%;
  transform: translateX(-50%);
  bottom: clamp(8px, 2vh, 24px);
  width: min(920px, calc(100vw - 24px));
  height: 80px;
  z-index: 1000;

  background: $poke-bg linear-gradient(180deg, #ffffff 0%, #f6f6f6 100%);
  border: 2px solid $poke-border;
  border-radius: 14px;
  padding: 14px 64px 16px 18px; 
  box-shadow:
    0 6px 0 0 $poke-border,       
    0 12px 24px $poke-shadow;     

  &::before {
    content: '';
    position: absolute;
    inset: -6px;
    border: 2px solid $poke-border;
    border-radius: 18px;
    pointer-events: none;
  }
  &::after {
    content: '';
    position: absolute;
    left: 12px;
    right: 12px;
    bottom: 60px;
    height: 0;
    border-bottom: 2px dotted rgba($poke-border, 0.2);
    pointer-events: none;
  }


.modal-messages__txt {
  margin: 0;
  padding-right: 48px;
  font-family: $pixel-font-large;
  font-size: 1.5rem;
  line-height: 1.5;
  color: #111;
  white-space: pre-wrap;
  min-height: 2.8em; 

  &.is-typing::after {
    content: '';
    display: inline-block;
    vertical-align: baseline;
    width: 0.6ch;
    height: 1em;
    margin-left: 2px;
    border-right: 2px solid $poke-border;
    animation: caret-blink 1s steps(1, end) infinite;
  }
}


.modal-messages__next {
  position: absolute;
  right: 12px;
  bottom: 8px;
  display: inline-flex;
  align-items: center;
  justify-content: center;
  min-width: 38px;
  min-height: 32px;
  appearance: none;
  border: 2px solid $poke-border;
  background: linear-gradient(180deg, #ffffff 0%, #eaeaea 100%);
  border-radius: 10px;
  font-size: 12px;
  line-height: 0.1;
  padding: 2px 2px;
  cursor: pointer;
  box-shadow:
    0 3px 0 0 $poke-border,
    inset 0 0 0 2px rgba($poke-accent-2, 0.08);


  &:active {
    transform: translateY(2px);
    box-shadow:
      0 1px 0 0 $poke-border,
      inset 0 0 0 2px rgba($poke-accent-2, 0.12);
  }


  &:not(:disabled) {
    animation: next-pulse 1200ms ease-in-out infinite;
  }


  &:disabled {
    opacity: 0;
    visibility: hidden;
    pointer-events: none;
    animation: none;
  }
}
}